<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Access Control - Authelia</title> <link rel="shortcut icon" href="/docs/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/docs/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-124926127-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-124926127-1'); </script> <script type="text/javascript" src="/docs/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/docs/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Access Control | Authelia</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Access Control" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Authelia is an open source multi-factor single sign-on portal for web applications" /> <meta property="og:description" content="Authelia is an open source multi-factor single sign-on portal for web applications" /> <meta property="og:site_name" content="Authelia" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Access Control" /> <script type="application/ld+json"> {"url":"/docs/configuration/access-control.html","headline":"Access Control","@type":"WebPage","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/docs/images/authelia-title.png"}},"description":"Authelia is an open source multi-factor single sign-on portal for web applications","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css" /> <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" /> </head> <body> <a class="github-fork-ribbon" href="https://github.com/authelia/authelia" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-contrib" viewBox="0 0 24 24"> <title>Survey contribution</title> <?xml version="1.0" encoding="iso-8859-1"?> <!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0) --> <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"> <path style="fill:#FEC9A3;" d="M507.661,503.322V399.907c0-11.325-5.528-21.938-14.805-28.438l-65.25-45.681 c-4.374-3.063-9.589-4.703-14.935-4.703h-52.536l0.868,148.48c0.321,15.473,10.431,29.028,25.166,33.757H507.661z"/> <path style="fill:#FABD91;" d="M455.593,503.322h-60.746c-19.17,0-34.712-15.542-34.712-34.712v-34.712h60.746L455.593,503.322z"/> <path style="fill:#88B337;" d="M229.966,60.746c-5.979,0.009-11.889,1.258-17.356,3.662V0H56.407 C27.648,0,4.339,23.309,4.339,52.068v156.203h64.408c-9.633-21.938,0.338-47.538,22.285-57.17 c21.938-9.633,47.538,0.338,57.17,22.285c4.886,11.116,4.886,23.778,0,34.894h64.408v-64.408 c21.938,9.633,47.538-0.338,57.17-22.285s-0.338-47.538-22.285-57.17C241.976,61.978,236.006,60.737,229.966,60.746z"/> <path style="fill:#E8594A;" d="M420.881,52.068C420.881,23.309,397.572,0,368.814,0H212.61v64.408 c21.938-9.633,47.538,0.338,57.17,22.285c9.633,21.938-0.338,47.538-22.285,57.17c-11.116,4.886-23.778,4.886-34.894,0v64.408 h64.408c-9.633,21.938,0.338,47.538,22.285,57.17c21.938,9.633,47.538-0.338,57.17-22.285c4.886-11.116,4.886-23.778,0-34.894 h64.417V52.068z"/> <path style="fill:#D65245;" d="M420.881,57.023C371.278,126.03,281.73,165.228,212.61,186.325v21.947h64.408 c-9.633,21.938,0.338,47.538,22.285,57.17c21.938,9.633,47.538-0.338,57.17-22.285c4.886-11.116,4.886-23.778,0-34.894h64.408 V57.023z"/> <path style="fill:#FDB62F;" d="M195.254,277.695c5.979,0.009,11.889,1.258,17.356,3.662v-73.086h-64.408 c9.633-21.938-0.338-47.538-22.285-57.17c-21.947-9.633-47.538,0.338-57.17,22.285c-4.886,11.116-4.886,23.778,0,34.894H4.339 v156.203c0,28.759,23.309,52.068,52.068,52.068H212.61v-55.73c-21.938,9.633-47.538-0.338-57.17-22.285 c-9.633-21.938,0.338-47.538,22.285-57.17C183.244,278.927,189.214,277.686,195.254,277.695z"/> <path style="fill:#FFA719;" d="M4.339,364.475c0,28.759,23.309,52.068,52.068,52.068H212.61v-55.73 c-21.834,9.615-47.33-0.286-56.945-22.12c-2.23-5.068-3.471-10.526-3.645-16.063c-46.523,20.749-96.751,31.918-147.682,32.846 V364.475z"/> <path style="fill:#4398D1;" d="M443.574,389.641l-54.906-146.658l-60.303,22.71c16.809,17.122,16.549,44.631-0.573,61.431 c-17.122,16.801-44.631,16.549-61.431-0.573c-8.556-8.721-13.052-20.636-12.375-32.837l-60.295,22.71l25.687,68.634 c-5.962-0.338-11.932,0.573-17.529,2.673c-22.407,8.695-33.514,33.905-24.819,56.311c8.548,22.016,33.098,33.202,55.322,25.183 c5.597-2.109,10.7-5.372,14.969-9.563L266.9,512l146.241-55.079C440.094,446.716,453.71,416.62,443.574,389.641z"/> <path style="fill:#3E8FC9;" d="M415.258,314.012c-59.878,89.557-172.127,120.832-237.872,131.601 c9.225,21.947,34.495,32.256,56.441,23.031c5.025-2.109,9.607-5.163,13.494-8.982L266.9,512l146.241-55.079 c26.945-10.205,40.552-40.283,30.434-67.254L415.258,314.012z"/> <path style="fill:#80A834;" d="M229.966,60.746c-5.979,0.009-11.889,1.258-17.356,3.662V51.816 C147.63,111.633,59.592,144.67,4.339,160.768v47.503h64.408c-9.633-21.938,0.338-47.538,22.285-57.17 c21.938-9.633,47.538,0.338,57.17,22.285c4.886,11.116,4.886,23.778,0,34.894h64.408v-64.408 c21.938,9.633,47.538-0.338,57.17-22.285s-0.338-47.538-22.285-57.17C241.976,61.978,236.006,60.737,229.966,60.746z"/> <path style="fill:#FEC9A3;" d="M403.682,390.665c-8.305-8.47-21.903-8.609-30.373-0.304c-8.47,8.305-8.609,21.903-0.304,30.373 c0.104,0.104,0.2,0.208,0.304,0.304l30.217,30.217c0,28.759,23.309,52.068,52.068,52.068l0,0h52.068v-8.678L403.682,390.665z"/> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/docs/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/" class="nav-list-link">Home</a><ul class="nav-list "><li class="nav-list-item "><a href="/docs/home/architecture.html" class="nav-list-link">Architecture</a></li><li class="nav-list-item "><a href="/docs/home/supported-proxies.html" class="nav-list-link">Supported Proxies</a></li></ul></li><li class="nav-list-item"><a href="/docs/getting-started.html" class="nav-list-link">Getting Started</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/features/" class="nav-list-link">Features</a><ul class="nav-list "><li class="nav-list-item "><a href="/docs/features/first-factor.html" class="nav-list-link">First Factor</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/features/2fa/" class="nav-list-link">Second Factor</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/features/2fa/one-time-password.html" class="nav-list-link">Time-based One-Time Password</a> </li><li class="nav-list-item "> <a href="/docs/features/2fa/security-key.html" class="nav-list-link">Security Keys</a> </li><li class="nav-list-item "> <a href="/docs/features/2fa/push-notifications.html" class="nav-list-link">Push Notification</a> </li></ul></li><li class="nav-list-item "><a href="/docs/features/single-factor.html" class="nav-list-link">Single Factor</a></li><li class="nav-list-item "><a href="/docs/features/password-reset.html" class="nav-list-link">Password Reset</a></li><li class="nav-list-item "><a href="/docs/features/access-control.html" class="nav-list-link">Access Control</a></li><li class="nav-list-item "><a href="/docs/features/regulation.html" class="nav-list-link">Regulation</a></li><li class="nav-list-item "><a href="/docs/features/statelessness.html" class="nav-list-link">Statelessness</a></li><li class="nav-list-item "><a href="/docs/features/logout.html" class="nav-list-link">Logout</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/configuration/" class="nav-list-link">Configuration</a><ul class="nav-list "><li class="nav-list-item active"><a href="/docs/configuration/access-control.html" class="nav-list-link active">Access Control</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/configuration/authentication/" class="nav-list-link">Authentication Backends</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/configuration/authentication/file.html" class="nav-list-link">File</a> </li><li class="nav-list-item "> <a href="/docs/configuration/authentication/ldap.html" class="nav-list-link">LDAP</a> </li></ul></li><li class="nav-list-item "><a href="/docs/configuration/duo-push-notifications.html" class="nav-list-link">Duo Push Notifications</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/configuration/identity-providers/" class="nav-list-link">Identity Providers</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/configuration/identity-providers/oidc.html" class="nav-list-link">OpenID Connect</a> </li></ul></li><li class="nav-list-item "><a href="/docs/configuration/logging.html" class="nav-list-link">Logging</a></li><li class="nav-list-item "><a href="/docs/configuration/migration.html" class="nav-list-link">Migration</a></li><li class="nav-list-item "><a href="/docs/configuration/miscellaneous.html" class="nav-list-link">Miscellaneous</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/configuration/notifier/" class="nav-list-link">Notifier</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/configuration/notifier/filesystem.html" class="nav-list-link">Filesystem</a> </li><li class="nav-list-item "> <a href="/docs/configuration/notifier/smtp.html" class="nav-list-link">SMTP</a> </li></ul></li><li class="nav-list-item "><a href="/docs/configuration/ntp.html" class="nav-list-link">NTP</a></li><li class="nav-list-item "><a href="/docs/configuration/regulation.html" class="nav-list-link">Regulation</a></li><li class="nav-list-item "><a href="/docs/configuration/secrets.html" class="nav-list-link">Secrets</a></li><li class="nav-list-item "><a href="/docs/configuration/server.html" class="nav-list-link">Server</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/configuration/session/" class="nav-list-link">Session</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/configuration/session/redis.html" class="nav-list-link">Redis</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/configuration/storage/" class="nav-list-link">Storage Backends</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/configuration/storage/mariadb.html" class="nav-list-link">MariaDB</a> </li><li class="nav-list-item "> <a href="/docs/configuration/storage/mysql.html" class="nav-list-link">MySQL</a> </li><li class="nav-list-item "> <a href="/docs/configuration/storage/postgres.html" class="nav-list-link">PostgreSQL</a> </li><li class="nav-list-item "> <a href="/docs/configuration/storage/sqlite.html" class="nav-list-link">SQLite</a> </li><li class="nav-list-item "> <a href="/docs/configuration/storage/migrations.html" class="nav-list-link">Migrations</a> </li></ul></li><li class="nav-list-item "><a href="/docs/configuration/theme.html" class="nav-list-link">Theme</a></li><li class="nav-list-item "><a href="/docs/configuration/webauthn.html" class="nav-list-link">Webauthn</a></li><li class="nav-list-item "><a href="/docs/configuration/one-time-password.html" class="nav-list-link">Time-based One-Time Password</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/deployment/" class="nav-list-link">Deployment</a><ul class="nav-list "><li class="nav-list-item "><a href="/docs/deployment/deployment-lite.html" class="nav-list-link">Deployment - Lite</a></li><li class="nav-list-item "><a href="/docs/deployment/deployment-ha.html" class="nav-list-link">Deployment - Highly-Available</a></li><li class="nav-list-item "><a href="/docs/deployment/deployment-kubernetes.html" class="nav-list-link">Deployment - Kubernetes</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/deployment/supported-proxies/" class="nav-list-link">Proxy Integration</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/deployment/supported-proxies/haproxy.html" class="nav-list-link">HAProxy</a> </li><li class="nav-list-item "> <a href="/docs/deployment/supported-proxies/nginx.html" class="nav-list-link">NGINX</a> </li><li class="nav-list-item "> <a href="/docs/deployment/supported-proxies/traefik1.x.html" class="nav-list-link">Traefik 1.x</a> </li><li class="nav-list-item "> <a href="/docs/deployment/supported-proxies/traefik2.x.html" class="nav-list-link">Traefik 2.x</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/security/" class="nav-list-link">Security</a><ul class="nav-list "><li class="nav-list-item "><a href="/docs/security/measures.html" class="nav-list-link">Security Measures</a></li><li class="nav-list-item "><a href="/docs/security/threat-model.html" class="nav-list-link">Threat Model</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/contributing/" class="nav-list-link">Contributing</a><ul class="nav-list "><li class="nav-list-item "><a href="/docs/contributing/build-and-dev.html" class="nav-list-link">Build & Dev</a></li><li class="nav-list-item "><a href="/docs/contributing/authelia-scripts.html" class="nav-list-link">Authelia Scripts</a></li><li class="nav-list-item "><a href="/docs/contributing/commitmsg-guidelines.html" class="nav-list-link">Commit Message Guidelines</a></li><li class="nav-list-item "><a href="/docs/contributing/style-guide.html" class="nav-list-link">Style Guide</a></li><li class="nav-list-item "><a href="/docs/contributing/suites.html" class="nav-list-link">Suites</a></li></ul></li><li class="nav-list-item"><a href="/docs/faq.html" class="nav-list-link">FAQ</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/roadmap/" class="nav-list-link">Roadmap</a><ul class="nav-list "><li class="nav-list-item "><a href="/docs/roadmap/oidc.html" class="nav-list-link">OpenID Connect</a></li></ul></li><li class="nav-list-item"><a href="/docs/about-us.html" class="nav-list-link">About Us</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/community/" class="nav-list-link">Community</a><ul class="nav-list "><li class="nav-list-item "><a href="/docs/community/two-factor-basic-auth.html" class="nav-list-link">2FA through basic auth</a></li><li class="nav-list-item "><a href="/docs/community/using-remote-user-header-for-sso-with-jira.html" class="nav-list-link">Using Remote-User header for SSO with Jira</a></li><li class="nav-list-item "><a href="/docs/community/additional-resources.html" class="nav-list-link">Miscellaneous Additional Resources</a></li><li class="nav-list-item "><a href="/docs/community/example-of-authelia-lite-on-docker-swarm.html" class="nav-list-link">Example of authelia lite on docker swarm</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/community/oidc-integrations.html" class="nav-list-link">Community-Tested OIDC Integrations</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/community/oidc-integrations/portainer.html" class="nav-list-link">Portainer</a> </li><li class="nav-list-item "> <a href="/docs/community/oidc-integrations/proxmox.html" class="nav-list-link">Proxmox</a> </li></ul></li><li class="nav-list-item "><a href="/docs/community/django-integration.html" class="nav-list-link">Integrate Authelia with Django</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Authelia" aria-label="Search Authelia" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="">Configuration</a></li> <li class="breadcrumb-nav-list-item"><span>Access Control</span></li> </ol> </nav> <div id="survey-wrapper" style="border: 1px solid #d6d6d6; border-radius: 5px; background-color: #f1f1f1; padding: 20px; display: flex; flex-direction: row; align-items: center;"> <svg viewBox="0 0 24 24" width="32px" height="32px" class="contrib-icon" style="display: inline-block"><use xlink:href="#svg-contrib"></use></svg> <span style="margin-left: 10px">Help the team improve <b>Authelia</b> by taking this <a href="https://forms.gle/aVw6J9jcez97EAhD6" target="_blank">10-second survey</a>.</span> </div> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="access-control"> <a href="#access-control" class="anchor-heading" aria-labelledby="access-control"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Access Control </h1> <h2 id="configuration"> <a href="#configuration" class="anchor-heading" aria-labelledby="configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuration </h2> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">access_control</span><span class="pi">:</span>
  <span class="na">default_policy</span><span class="pi">:</span> <span class="s">deny</span>
  <span class="na">networks</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">internal</span>
    <span class="na">networks</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">10.0.0.0/8</span>
    <span class="pi">-</span> <span class="s">172.16.0.0/12</span>
    <span class="pi">-</span> <span class="s">192.168.0.0/18</span>

  <span class="na">rules</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span> <span class="s">public.example.com</span>
    <span class="na">policy</span><span class="pi">:</span> <span class="s">bypass</span>
    <span class="na">networks</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">internal</span>
    <span class="pi">-</span> <span class="s">1.1.1.1</span>
    <span class="na">subject</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="pi">[</span><span class="s2">"</span><span class="s">user:adam"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">user:fred"</span><span class="pi">]</span>
    <span class="pi">-</span> <span class="pi">[</span><span class="s2">"</span><span class="s">group:admins"</span><span class="pi">]</span>
    <span class="na">methods</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">GET</span>
    <span class="pi">-</span> <span class="s">HEAD</span>
    <span class="na">resources</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s2">"</span><span class="s">^/api.*"</span>
</code></pre></div></div> <h2 id="options"> <a href="#options" class="anchor-heading" aria-labelledby="options"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Options </h2> <h3 id="default_policy"> <a href="#default_policy" class="anchor-heading" aria-labelledby="default_policy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> default_policy </h3> <div> <p class="label label-config label-purple">type: string</p> <p class="label label-config label-blue">default: deny</p> <p class="label label-config label-green">required: no</p> </div> <p>The default <a href="#policies">policy</a> defines the policy applied if no <a href="#rules">rules</a> section apply to the information known about the request. It is recommended that this is configured to <a href="#deny">deny</a> for security reasons. Sites which you do not wish to secure at all with Authelia should not be configured in your reverse proxy to perform authentication with Authelia at all for performance reasons.</p> <p>See <a href="#policies">Policies</a> for more information.</p> <h3 id="networks-global"> <a href="#networks-global" class="anchor-heading" aria-labelledby="networks-global"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> networks (global) </h3> <div> <p class="label label-config label-purple">type: list</p> <p class="label label-config label-green">required: no</p> </div> <p>The main/global networks section contains a list of networks with a name label that can be reused in the <a href="#networks">rules</a> section instead of redefining the same networks over and over again. This additionally makes complicated network related configuration a lot cleaner and easier to read.</p> <p>This section has two options, <code class="language-plaintext highlighter-rouge">name</code> and <code class="language-plaintext highlighter-rouge">networks</code>. Where the <code class="language-plaintext highlighter-rouge">networks</code> section is a list of IP addresses in CIDR notation and where <code class="language-plaintext highlighter-rouge">name</code> is a friendly name to label the collection of networks for reuse in the <a href="#networks">networks</a> section of the <a href="#rules">rules</a> section below.</p> <p>This configuration option <em>does nothing</em> by itself, it’s only useful if you use these aliases in the <a href="#networks">rules</a> section below.</p> <h3 id="rules"> <a href="#rules" class="anchor-heading" aria-labelledby="rules"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> rules </h3> <div> <p class="label label-config label-purple">type: list</p> <p class="label label-config label-green">required: no</p> </div> <p>The rules have many configuration options. A rule matches when all criteria of the rule match the request excluding the <code class="language-plaintext highlighter-rouge">policy</code> which is the <a href="#policies">policy</a> applied to the request.</p> <p>A rule defines two primary things:</p> <ul> <li> <p>the policy applied when all criteria match.</p> </li> <li> <p>the matching criteria of the request presented to the reverse proxy</p> </li> </ul> <p>The criteria is broken into several parts:</p> <ul> <li><a href="#domain">domain</a>: domain or list of domains targeted by the request.</li> <li><a href="#resources">resources</a>: pattern or list of patterns that the path should match.</li> <li><a href="#subject">subject</a>: the user or group of users to define the policy for.</li> <li><a href="#networks">networks</a>: the network addresses, ranges (CIDR notation) or groups from where the request originates.</li> <li><a href="#methods">methods</a>: the http methods used in the request.</li> </ul> <p>A rule is matched when all criteria of the rule match. Rules are evaluated in sequential order, and the first rule that is a match for a given request is the rule applied; subsequent rules have <em>no effect</em>. This is particularly <strong>important</strong> for bypass rules. Bypass rules should generally appear near the top of the rules list. However you need to carefully evaluate your rule list <strong>in order</strong> to see which rule matches a particular scenario. A comprehensive understanding of how rules apply is also recommended.</p> <h4 id="policy"> <a href="#policy" class="anchor-heading" aria-labelledby="policy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> policy </h4> <div> <p class="label label-config label-purple">type: string</p> <p class="label label-config label-red">required: yes</p> </div> <p>The specific <a href="#policies">policy</a> to apply to the selected rule. This is not criteria for a match, this is the action to take when a match is made.</p> <h4 id="domain"> <a href="#domain" class="anchor-heading" aria-labelledby="domain"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> domain </h4> <div> <p class="label label-config label-purple">type: list(string)</p> <p class="label label-config label-red">required: yes</p> </div> <p>This criteria matches the domain name and has two methods of configuration, either as a single string or as a list of strings. When it’s a list of strings the rule matches when <strong>any</strong> of the domains in the list match the request domain.</p> <p>Rules may start with a few different wildcards:</p> <ul> <li> <p>The standard wildcard is <code class="language-plaintext highlighter-rouge">*.</code>, which when in front of a domain means that any subdomain is effectively a match. For example <code class="language-plaintext highlighter-rouge">*.example.com</code> would match <code class="language-plaintext highlighter-rouge">abc.example.com</code> and <code class="language-plaintext highlighter-rouge">secure.example.com</code>. When using a wildcard like this the string <strong>must</strong> be quoted like <code class="language-plaintext highlighter-rouge">"*.example.com"</code>.</p> </li> <li> <p>The user wildcard is <code class="language-plaintext highlighter-rouge">{user}.</code>, which when in front of a domain dynamically matches the username of the user. For example <code class="language-plaintext highlighter-rouge">{user}.example.com</code> would match <code class="language-plaintext highlighter-rouge">fred.example.com</code> if the user logged in was named <code class="language-plaintext highlighter-rouge">fred</code>. <em><strong>Note:</strong> we’re considering refactoring this to just be regex which would likely allow many additional possibilities.</em></p> </li> <li> <p>The group wildcard is <code class="language-plaintext highlighter-rouge">{group}.</code>, which when in front of a domain dynamically matches if the logged in user has the group in that location. For example <code class="language-plaintext highlighter-rouge">{group}.example.com</code> would match <code class="language-plaintext highlighter-rouge">admins.example.com</code> if the user logged in was in the following groups <code class="language-plaintext highlighter-rouge">admins,users,people</code> because <code class="language-plaintext highlighter-rouge">admins</code> is in the list.</p> </li> </ul> <p>Domains in this section must be the domain configured in the <a href="/docs/configuration/session/#domain">session</a> configuration or subdomains of that domain. This is because a website can only write cookies for a domain it is part of. It is theoretically possible for us to do this with multiple domains however we would have to be security conscious in our implementation, and it is not currently a priority.</p> <p>Examples:</p> <p><em>Single domain of <code class="language-plaintext highlighter-rouge">*.example.com</code> matched. All rules in this list are effectively the same rule just expressed in different ways.</em></p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">access_control</span><span class="pi">:</span>
  <span class="na">rules</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span> <span class="s2">"</span><span class="s">*.example.com"</span>
    <span class="na">policy</span><span class="pi">:</span> <span class="s">bypass</span>
  <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s2">"</span><span class="s">*.example.com"</span>
    <span class="na">policy</span><span class="pi">:</span> <span class="s">bypass</span>
</code></pre></div></div> <p><em>Multiple domains matched. These rules would match either <code class="language-plaintext highlighter-rouge">apple.example.com</code> or <code class="language-plaintext highlighter-rouge">orange.example.com</code>. All rules in this list are effectively the same rule just expressed in different ways.</em></p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">access_control</span><span class="pi">:</span>
  <span class="na">rules</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">apple.example.com"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">banana.example.com"</span><span class="pi">]</span>
    <span class="na">policy</span><span class="pi">:</span> <span class="s">bypass</span>
  <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">apple.example.com</span>
    <span class="pi">-</span> <span class="s">banana.example.com</span>
    <span class="na">policy</span><span class="pi">:</span> <span class="s">bypass</span>
</code></pre></div></div> <h3 id="subject"> <a href="#subject" class="anchor-heading" aria-labelledby="subject"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> subject </h3> <div> <p class="label label-config label-purple">type: list(list(string))</p> <p class="label label-config label-green">required: no</p> </div> <p><em><strong>Note:</strong> this rule criteria <strong>may not</strong> be used for the <code class="language-plaintext highlighter-rouge">bypass</code> policy the minimum required authentication level to identify the subject is <code class="language-plaintext highlighter-rouge">one_factor</code>. We have taken an opinionated stance on preventing this configuration as it could result in problematic security scenarios with badly thought out configurations and cannot see a likely configuration scenario that would require users to do this. If you have a scenario in mind please open an <a href="https://github.com/authelia/authelia/issues/new">issue</a> on GitHub.</em></p> <p>This criteria matches identifying characteristics about the subject. Currently this is either user or groups the user belongs to. This allows you to effectively control exactly what each user is authorized to access or to specifically require two-factor authentication to specific users. Subjects are prefixed with either <code class="language-plaintext highlighter-rouge">user:</code> or <code class="language-plaintext highlighter-rouge">group:</code> to identify which part of the identity to check.</p> <p>The format of this rule is unique in as much as it is a list of lists. The logic behind this format is to allow for both <code class="language-plaintext highlighter-rouge">OR</code> and <code class="language-plaintext highlighter-rouge">AND</code> logic. The first level of the list defines the <code class="language-plaintext highlighter-rouge">OR</code> logic, and the second level defines the <code class="language-plaintext highlighter-rouge">AND</code> logic. Additionally each level of these lists does not have to be explicitly defined.</p> <p>Example:</p> <p><em>Matches when the user has the username <code class="language-plaintext highlighter-rouge">john</code>, <strong>or</strong> the user is in the groups <code class="language-plaintext highlighter-rouge">admin</code> <strong>and</strong> <code class="language-plaintext highlighter-rouge">app-name</code>, <strong>or</strong> the user is in the group <code class="language-plaintext highlighter-rouge">super-admin</code>. All rules in this list are effectively the same rule just expressed in different ways.</em></p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">access_control</span><span class="pi">:</span>
  <span class="na">rules</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span> <span class="s">example.com</span>
    <span class="na">policy</span><span class="pi">:</span> <span class="s">two_factor</span>
    <span class="na">subject</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s2">"</span><span class="s">user:john"</span>
    <span class="pi">-</span> <span class="pi">[</span><span class="s2">"</span><span class="s">group:admin"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">group:app-name"</span><span class="pi">]</span>
    <span class="pi">-</span> <span class="s2">"</span><span class="s">group:super-admin"</span>
  <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span> <span class="s">example.com</span>
    <span class="na">policy</span><span class="pi">:</span> <span class="s">two_factor</span>
    <span class="na">subject</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="pi">[</span><span class="s2">"</span><span class="s">user:john"</span><span class="pi">]</span>
    <span class="pi">-</span> <span class="pi">[</span><span class="s2">"</span><span class="s">group:admin"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">group:app-name"</span><span class="pi">]</span>
    <span class="pi">-</span> <span class="pi">[</span><span class="s2">"</span><span class="s">group:super-admin"</span><span class="pi">]</span>
</code></pre></div></div> <p><em>Matches when the user is in the <code class="language-plaintext highlighter-rouge">super-admin</code> group. All rules in this list are effectively the same rule just expressed in different ways.</em></p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">access_control</span><span class="pi">:</span>
  <span class="na">rules</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span> <span class="s">example.com</span>
    <span class="na">policy</span><span class="pi">:</span> <span class="s">one_factor</span>
    <span class="na">subject</span><span class="pi">:</span> <span class="s2">"</span><span class="s">group:super-admin"</span>
  <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span> <span class="s">example.com</span>
    <span class="na">policy</span><span class="pi">:</span> <span class="s">one_factor</span>
    <span class="na">subject</span><span class="pi">:</span> 
    <span class="pi">-</span> <span class="s2">"</span><span class="s">group:super-admin"</span>
  <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span> <span class="s">example.com</span>
    <span class="na">policy</span><span class="pi">:</span> <span class="s">one_factor</span>
    <span class="na">subject</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="pi">[</span><span class="s2">"</span><span class="s">group:super-admin"</span><span class="pi">]</span>
</code></pre></div></div> <h3 id="methods"> <a href="#methods" class="anchor-heading" aria-labelledby="methods"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> methods </h3> <div> <p class="label label-config label-purple">type: list(string)</p> <p class="label label-config label-green">required: no</p> </div> <p>This criteria matches the HTTP request method. This is primarily useful when trying to bypass authentication for specific request types when those requests would prevent essential or public operation of the website. An example is when you need to do CORS preflight requests you could apply the <code class="language-plaintext highlighter-rouge">bypass</code> policy to <code class="language-plaintext highlighter-rouge">OPTIONS</code> requests.</p> <p>It’s important to note that Authelia cannot preserve request data when redirecting the user. For example if the user had permission to do GET requests, their authentication level was <code class="language-plaintext highlighter-rouge">one_factor</code>, and POST requests required them to do <code class="language-plaintext highlighter-rouge">two_factor</code> authentication, they would lose the form data. Additionally it is sometimes not possible to redirect users who have done requests other than HEAD or GET which means the user experience may suffer. These are the reasons it’s only recommended to use this to increase security where essential and for CORS preflight.</p> <p>Example:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">access_control</span><span class="pi">:</span>
  <span class="na">rules</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span> <span class="s">example.com</span>
    <span class="na">policy</span><span class="pi">:</span> <span class="s">bypass</span>
    <span class="na">methods</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">OPTIONS</span>
</code></pre></div></div> <p>The valid request methods are: OPTIONS, HEAD, GET, POST, PUT, PATCH, DELETE, TRACE, CONNECT. Additional information about HTTP request methods can be found on the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods">MDN</a>.</p> <h3 id="networks"> <a href="#networks" class="anchor-heading" aria-labelledby="networks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> networks </h3> <div> <p class="label label-config label-purple">type: list(string)</p> <p class="label label-config label-green">required: no</p> </div> <p>This criteria is a list of values which can be an IP Address, network address range in CIDR notation, or an alias from the <a href="#networks-global">global</a> section. It matches against the first address in the <code class="language-plaintext highlighter-rouge">X-Forwarded-For</code> header, or if there are none it will fall back to the IP address of the packet TCP source IP address. For this reason it’s important for you to configure the proxy server correctly in order to accurately match requests with this criteria. <em><strong>Note:</strong> you may combine CIDR networks with the alias rules as you please.</em></p> <p>The main use case for this criteria is adjust the security requirements of a resource based on the location of a user. You can theoretically consider a specific network to be one of the factors involved in authentiation, you can deny specific networks, etc.</p> <p>For example if you have an application exposed on both the local networks and the external networks, you are able to distinguish between those requests and apply differing policies to each. Either denying access when the user is on the external networks and allowing specific external clients to access it as well as internal clients, or by requiring less privileges when a user is on the local networks.</p> <p>There are a large number of scenarios regarding networks and the order of the rules. This provides a lot of flexibility for administrators to tune the security to their specific needs if desired.</p> <p>Examples:</p> <p><em>Require <a href="#two_factor">two_factor</a> for all clients other than internal clients and <code class="language-plaintext highlighter-rouge">112.134.145.167</code>. The first two rules in this list are effectively the same rule just expressed in different ways.</em></p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">access_control</span><span class="pi">:</span>
  <span class="na">default_policy</span><span class="pi">:</span> <span class="s">two_factor</span>
  <span class="na">networks</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">internal</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">10.0.0.0/8</span>
      <span class="pi">-</span> <span class="s">172.16.0.0/12</span>
      <span class="pi">-</span> <span class="s">192.168.0.0/18</span>
  <span class="na">rules</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span> <span class="s">secure.example.com</span>
    <span class="na">policy</span><span class="pi">:</span> <span class="s">one_factor</span>
    <span class="na">networks</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">10.0.0.0/8</span>
    <span class="pi">-</span> <span class="s">172.16.0.0/12</span>
    <span class="pi">-</span> <span class="s">192.168.0.0/18</span>
    <span class="pi">-</span> <span class="s">112.134.145.167/32</span>
  <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span> <span class="s">secure.example.com</span>
    <span class="na">policy</span><span class="pi">:</span> <span class="s">one_factor</span>
    <span class="na">networks</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">internal</span>
    <span class="pi">-</span> <span class="s">112.134.145.167/32</span>
  <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span> <span class="s">secure.example.com</span>
    <span class="na">policy</span><span class="pi">:</span> <span class="s">two_factor</span>
</code></pre></div></div> <h3 id="resources"> <a href="#resources" class="anchor-heading" aria-labelledby="resources"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> resources </h3> <div> <p class="label label-config label-purple">type: list(string)</p> <p class="label label-config label-green">required: no</p> </div> <p>This criteria matches the path and query of the request using regular expressions. The rule is expressed as a list of strings. If any one of the regular expressions in the list matches the request it’s considered a match. A useful tool for debugging these regular expressions is called <a href="https://regoio.herokuapp.com/">Rego</a>.</p> <p><em><strong>Note:</strong> Prior to 4.27.0 the regular expressions only matched the path excluding the query parameters. After 4.27.0 they match the entire path including the query parameters. When upgrading you may be required to alter some of your resource rules to get them to operate as they previously did.</em></p> <p>It’s important when configuring resource rules that you enclose them in quotes otherwise you may run into some issues with escaping the expressions. Failure to do so may prevent Authelia from starting. It’s technically optional but will likely save you a lot of time if you do it for all resource rules.</p> <p>Examples:</p> <p><em>Applies the <a href="#bypass">bypass</a> policy when the domain is <code class="language-plaintext highlighter-rouge">app.example.com</code> and the url is <code class="language-plaintext highlighter-rouge">/api</code>, or starts with either <code class="language-plaintext highlighter-rouge">/api/</code> or <code class="language-plaintext highlighter-rouge">/api?</code>.</em></p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">access_control</span><span class="pi">:</span>
  <span class="na">rules</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span> <span class="s">app.example.com</span>
    <span class="na">policy</span><span class="pi">:</span> <span class="s">bypass</span>
    <span class="na">resources</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s2">"</span><span class="s">^/api([/?].*)?$"</span>
</code></pre></div></div> <h2 id="policies"> <a href="#policies" class="anchor-heading" aria-labelledby="policies"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Policies </h2> <p>With <strong>Authelia</strong> you can define a list of rules that are going to be evaluated in sequential order when authorization is delegated to Authelia.</p> <p>The first matching rule of the list defines the policy applied to the resource, if no rule matches the resource a customizable default policy is applied.</p> <h3 id="deny"> <a href="#deny" class="anchor-heading" aria-labelledby="deny"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> deny </h3> <p>This is the policy applied by default, and is what we recommend as the default policy for all installs. Its effect is literally to deny the user access to the resource. Additionally you can use this policy to conditionally deny access in desired situations. Examples include denying access to an API that has no authentication mechanism built in.</p> <h3 id="bypass"> <a href="#bypass" class="anchor-heading" aria-labelledby="bypass"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> bypass </h3> <p>This policy skips all authentication and allows anyone to use the resource. This policy is not available with a rule that includes a <a href="#subject">subject</a> restriction because the minimum authentication level required to obtain information about the subject is <a href="#one_factor">one_factor</a>.</p> <h3 id="one_factor"> <a href="#one_factor" class="anchor-heading" aria-labelledby="one_factor"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> one_factor </h3> <p>This policy requires the user at minimum complete 1FA successfully (username and password). This means if they have performed 2FA then they will be allowed to access the resource.</p> <h3 id="two_factor"> <a href="#two_factor" class="anchor-heading" aria-labelledby="two_factor"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> two_factor </h3> <p>This policy requires the user to complete 2FA successfully. This is currently the highest level of authentication policy available.</p> <h2 id="detailed-example"> <a href="#detailed-example" class="anchor-heading" aria-labelledby="detailed-example"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Detailed example </h2> <p>Here is a detailed example of an example access control section:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">access_control</span><span class="pi">:</span>
  <span class="na">default_policy</span><span class="pi">:</span> <span class="s">deny</span>
  <span class="na">networks</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">internal</span>
      <span class="na">networks</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">10.10.0.0/16</span>
        <span class="pi">-</span> <span class="s">192.168.2.0/24</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">VPN</span>
      <span class="na">networks</span><span class="pi">:</span> <span class="s">10.9.0.0/16</span>
  <span class="na">rules</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span> <span class="s">public.example.com</span>
      <span class="na">policy</span><span class="pi">:</span> <span class="s">bypass</span>

    <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span> <span class="s2">"</span><span class="s">*.example.com"</span>
      <span class="na">policy</span><span class="pi">:</span> <span class="s">bypass</span>
      <span class="na">methods</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">OPTIONS</span>

    <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span> <span class="s">secure.example.com</span>
      <span class="na">policy</span><span class="pi">:</span> <span class="s">one_factor</span>
      <span class="na">networks</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">internal</span>
        <span class="pi">-</span> <span class="s">VPN</span>
        <span class="pi">-</span> <span class="s">192.168.1.0/24</span>
        <span class="pi">-</span> <span class="s">10.0.0.1</span>

    <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">secure.example.com</span>
      <span class="pi">-</span> <span class="s">private.example.com</span>
      <span class="na">policy</span><span class="pi">:</span> <span class="s">two_factor</span>

    <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span> <span class="s">singlefactor.example.com</span>
      <span class="na">policy</span><span class="pi">:</span> <span class="s">one_factor</span>

    <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span> <span class="s2">"</span><span class="s">mx2.mail.example.com"</span>
      <span class="na">subject</span><span class="pi">:</span> <span class="s2">"</span><span class="s">group:admins"</span>
      <span class="na">policy</span><span class="pi">:</span> <span class="s">deny</span>

    <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span> <span class="s2">"</span><span class="s">*.example.com"</span>
      <span class="na">subject</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s2">"</span><span class="s">group:admins"</span>
        <span class="pi">-</span> <span class="s2">"</span><span class="s">group:moderators"</span>
      <span class="na">policy</span><span class="pi">:</span> <span class="s">two_factor</span>

    <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span> <span class="s">dev.example.com</span>
      <span class="na">resources</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">^/groups/dev/.*$"</span>
      <span class="na">subject</span><span class="pi">:</span> <span class="s2">"</span><span class="s">group:dev"</span>
      <span class="na">policy</span><span class="pi">:</span> <span class="s">two_factor</span>

    <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span> <span class="s">dev.example.com</span>
      <span class="na">resources</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">^/users/john/.*$"</span>
      <span class="na">subject</span><span class="pi">:</span> 
      <span class="pi">-</span> <span class="pi">[</span><span class="s2">"</span><span class="s">group:dev"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">user:john"</span><span class="pi">]</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">group:admins"</span>
      <span class="na">policy</span><span class="pi">:</span> <span class="s">two_factor</span>

    <span class="pi">-</span> <span class="na">domain</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{user}.example.com"</span>
      <span class="na">policy</span><span class="pi">:</span> <span class="s">bypass</span>
</code></pre></div></div> <hr> <footer> <p class="text-small text-grey-dk-000 mb-0">Copyright &copy; 2021 Authelia. Distributed by an <a href="https://github.com/authelia/authelia/blob/master/LICENSE">Apache 2.0 license.</a> </p> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
